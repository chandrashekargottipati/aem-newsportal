<sly
  data-sly-use.model="com.gofortrainings.newsportal.core.models.ArticleDetailModel"
/>

<div
  id="article-container"
  data-json-data="${model.jsonData @ context='text'}"
></div>
<sly
  data-sly-call="${'@path'='/apps/newsportal/clientlibs/clientlib-desktop'}"
></sly>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Get the JSON data from the data attribute
    const jsonData =
      document.getElementById("article-container").dataset.jsonData;
    const data = JSON.parse(jsonData);
    const articleContainer = document.getElementById("article-container");
    const ulElement = document.createElement("ul");
    data.forEach((article) => {
      const listItem = document.createElement("li");
      listItem.className = "article";
      listItem.innerHTML = `
        <h2>${escapeHtml(article.title)}</h2>
        <p>ID: ${escapeHtml(article.id)}</p>
        <p>User ID: ${escapeHtml(article.user_id)}</p>
        <p>${escapeHtml(article.body)}</p>
      `;
      ulElement.appendChild(listItem);
    });
    articleContainer.appendChild(ulElement);
  });

  function escapeHtml(unsafe) {
    return String(unsafe)
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;")
      .replace(/'/g, "&#039;");
  }
</script>
